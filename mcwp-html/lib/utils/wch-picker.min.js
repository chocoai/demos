var wch=function(e,t){var n=/complete|loaded|interactive/,i=/^#([\w-]+)$/,r=/^\.([\w-]+)$/,a=/^[\w-]+$/,o=/translate(?:3d)?\((.+?)\)/,s=/matrix(3d)?\((.+?)\)/,c=function(t,n){if(n=n||e,!t)return l();if("object"==typeof t)return c.isArrayLike(t)?l(c.slice.call(t),null):l([t],null);if("function"==typeof t)return c.ready(t);if("string"==typeof t)try{if(t=t.trim(),i.test(t)){var r=e.getElementById(RegExp.$1);return l(r?[r]:[])}return l(c.qsa(t,n),t)}catch(a){}return l()},l=function(e,t){return e=e||[],Object.setPrototypeOf(e,c.fn),e.selector=t||"",e};c.uuid=0,c.data={},c.extend=function(){var e,n,i,r,a,o,s=arguments[0]||{},l=1,u=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[l]||{},l++),"object"==typeof s||c.isFunction(s)||(s={}),l===u&&(s=this,l--);l<u;l++)if(null!=(e=arguments[l]))for(n in e)i=s[n],r=e[n],s!==r&&(d&&r&&(c.isPlainObject(r)||(a=c.isArray(r)))?(a?(a=!1,o=i&&c.isArray(i)?i:[]):o=i&&c.isPlainObject(i)?i:{},s[n]=c.extend(d,o,r)):r!==t&&(s[n]=r));return s},c.noop=function(){},c.slice=[].slice,c.filter=[].filter,c.type=function(e){return null==e?String(e):u[{}.toString.call(e)]||"object"},c.isArray=Array.isArray||function(e){return e instanceof Array},c.isArrayLike=function(e){var t=!!e&&"length"in e&&e.length,n=c.type(e);return"function"!==n&&!c.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)},c.isWindow=function(e){return null!=e&&e===e.window},c.isObject=function(e){return"object"===c.type(e)},c.isPlainObject=function(e){return c.isObject(e)&&!c.isWindow(e)&&Object.getPrototypeOf(e)===Object.prototype},c.isEmptyObject=function(e){for(var n in e)if(n!==t)return!1;return!0},c.isFunction=function(e){return"function"===c.type(e)},c.qsa=function(t,n){return n=n||e,c.slice.call(r.test(t)?n.getElementsByClassName(RegExp.$1):a.test(t)?n.getElementsByTagName(t):n.querySelectorAll(t))},c.ready=function(t){return n.test(e.readyState)?t(c):e.addEventListener("DOMContentLoaded",function(){t(c)},!1),this},c.buffer=function(e,t,n){function i(){r&&(r.cancel(),r=0),a=c.now(),e.apply(n||this,arguments),o=c.now()}var r,a=0,o=0,t=t||150;return c.extend(function(){!a||o>=a&&c.now()-o>t||o<a&&c.now()-a>8*t?i():(r&&r.cancel(),r=c.later(i,t,null,arguments))},{stop:function(){r&&(r.cancel(),r=0)}})},c.each=function(e,t,n){if(!e)return this;if("number"==typeof e.length)[].every.call(e,function(e,n){return t.call(e,n,e)!==!1});else for(var i in e)if(n){if(e.hasOwnProperty(i)&&t.call(e[i],i,e[i])===!1)return e}else if(t.call(e[i],i,e[i])===!1)return e;return this},c.focus=function(e){c.os.ios?setTimeout(function(){e.focus()},10):e.focus()},c.trigger=function(e,t,n){return e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0})),this},c.getStyles=function(e,t){var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n.getPropertyValue(t)||n[t]:n},c.parseTranslate=function(e,t){var n=e.match(o||"");return n&&n[1]||(n=["","0,0,0"]),n=n[1].split(","),n={x:parseFloat(n[0]),y:parseFloat(n[1]),z:parseFloat(n[2])},t&&n.hasOwnProperty(t)?n[t]:n},c.parseTranslateMatrix=function(e,t){var n=e.match(s),i=n&&n[1];n?(n=n[2].split(","),"3d"===i?n=n.slice(12,15):(n.push(0),n=n.slice(4,7))):n=[0,0,0];var r={x:parseFloat(n[0]),y:parseFloat(n[1]),z:parseFloat(n[2])};return t&&r.hasOwnProperty(t)?r[t]:r},c.hooks={},c.addAction=function(e,t){var n=c.hooks[e];return n||(n=[]),t.index=t.index||1e3,n.push(t),n.sort(function(e,t){return e.index-t.index}),c.hooks[e]=n,c.hooks[e]},c.doAction=function(e,t){c.isFunction(t)?c.each(c.hooks[e],t):c.each(c.hooks[e],function(e,t){return!t.handle()})},c.later=function(e,t,n,i){t=t||0;var r,a,o=e,s=i;return"string"==typeof e&&(o=n[e]),r=function(){o.apply(n,c.isArray(s)?s:[s])},a=setTimeout(r,t),{id:a,cancel:function(){clearTimeout(a)}}},c.now=Date.now||function(){return+new Date};var u={};return c.each(["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],function(e,t){u["[object "+t+"]"]=t.toLowerCase()}),window.JSON&&(c.parseJSON=JSON.parse),c.fn={each:function(e){return[].every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this}},"function"==typeof define&&define.amd&&define("wch",[],function(){return c}),c}(document);!function(e,t){function n(n){this.os={};var i=[function(){var e=n.match(/(MicroMessenger)\/([\d\.]+)/i);return e&&(this.os.wechat={version:e[2].replace(/_/g,".")}),!1},function(){var e=n.match(/(Android);?[\s\/]+([\d.]+)?/);return e&&(this.os.android=!0,this.os.version=e[2],this.os.isBadAndroid=!/Chrome\/\d/.test(t.navigator.appVersion)),this.os.android===!0},function(){var e=n.match(/(iPhone\sOS)\s([\d_]+)/);if(e)this.os.ios=this.os.iphone=!0,this.os.version=e[2].replace(/_/g,".");else{var t=n.match(/(iPad).*OS\s([\d_]+)/);t&&(this.os.ios=this.os.ipad=!0,this.os.version=t[2].replace(/_/g,"."))}return this.os.ios===!0}];[].every.call(i,function(t){return!t.call(e)})}n.call(e,navigator.userAgent)}(wch,window),function(e){"ontouchstart"in window?(e.isTouchable=!0,e.EVENT_START="touchstart",e.EVENT_MOVE="touchmove",e.EVENT_END="touchend"):(e.isTouchable=!1,e.EVENT_START="mousedown",e.EVENT_MOVE="mousemove",e.EVENT_END="mouseup"),e.EVENT_CANCEL="touchcancel",e.EVENT_CLICK="click";var t=1,n={},i={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},r=function(){return!0},a=function(){return!1},o=function(t,n){return t.detail?t.detail.currentTarget=n:t.detail={currentTarget:n},e.each(i,function(e,n){var i=t[e];t[e]=function(){return this[n]=r,i&&i.apply(t,arguments)},t[n]=a},!0),t},s=function(e){return e&&(e._mid||(e._mid=t++))},c={},l=function(t,i,r,a){return function(r){for(var a=n[t._mid][i],s=[],c=r.target,l={};c&&c!==document&&c!==t&&(!~["click","tap","doubletap","longtap","hold"].indexOf(i)||!c.disabled&&!c.classList.contains("wch-disabled"));c=c.parentNode){var u={};e.each(a,function(n,i){l[n]||(l[n]=e.qsa(n,t)),l[n]&&~l[n].indexOf(c)&&(u[n]||(u[n]=i))},!0),e.isEmptyObject(u)||s.push({element:c,handlers:u})}l=null,r=o(r),e.each(s,function(t,n){c=n.element;var a=c.tagName;if("tap"===i&&"INPUT"!==a&&"TEXTAREA"!==a&&"SELECT"!==a&&(r.preventDefault(),r.detail&&r.detail.gesture&&r.detail.gesture.preventDefault()),e.each(n.handlers,function(t,n){e.each(n,function(e,t){t.call(c,r)===!1&&(r.preventDefault(),r.stopPropagation())},!0)},!0),r.isPropagationStopped())return!1},!0)}},u=function(e,t){var n=c[s(e)],i=[];if(n){if(i=[],t){var r=function(e){return e.type===t};return n.filter(r)}i=n}return i},d=/^(INPUT|TEXTAREA|BUTTON|SELECT)$/;e.fn.on=function(t,i,r){return this.each(function(){var a=this;s(a),s(r);var o=!1,u=n[a._mid]||(n[a._mid]={}),p=u[t]||(u[t]={});e.isEmptyObject(p)&&(o=!0);var f=p[i]||(p[i]=[]);if(f.push(r),o){var h=c[s(a)];h||(h=[]);var v=l(a,t,i,r);h.push(v),v.i=h.length-1,v.type=t,c[s(a)]=h,a.addEventListener(t,v),"tap"===t&&a.addEventListener("click",function(e){if(e.target){var t=e.target.tagName;if(!d.test(t))if("A"===t){var n=e.target.href;n&&~n.indexOf("tel:")||e.preventDefault()}else e.preventDefault()}})}})},e.fn.off=function(t,i,r){return this.each(function(){var a=s(this);if(t)if(i)if(r){var o=n[a]&&n[a][t]&&n[a][t][i];e.each(o,function(e,t){if(s(t)===s(r))return o.splice(e,1),!1},!0)}else n[a]&&n[a][t]&&delete n[a][t][i];else n[a]&&delete n[a][t];else n[a]&&delete n[a];n[a]?n[a][t]&&!e.isEmptyObject(n[a][t])||u(this,t).forEach(function(e){this.removeEventListener(e.type,e),delete c[a][e.i]}.bind(this)):u(this).forEach(function(e){this.removeEventListener(e.type,e),delete c[a][e.i]}.bind(this))})}}(wch),function(e,t,n){e.targets={},e.targetHandles=[],e.registerTarget=function(t){return t.index=t.index||1e3,e.targetHandles.push(t),e.targetHandles.sort(function(e,t){return e.index-t.index}),e.targetHandles},t.addEventListener(e.EVENT_START,function(t){for(var i=t.target,r={};i&&i!==n;i=i.parentNode){var a=!1;if(e.each(e.targetHandles,function(n,o){var s=o.name;a||r[s]||!o.hasOwnProperty("handle")?r[s]||o.isReset!==!1&&(e.targets[s]=!1):(e.targets[s]=o.handle(t,i),e.targets[s]&&(r[s]=!0,o.isContinue!==!0&&(a=!0)))}),a)break}}),t.addEventListener("click",function(t){for(var i=t.target,r=!1;i&&i!==n&&("A"!==i.tagName||(e.each(e.targetHandles,function(e,n){n.name;if(n.hasOwnProperty("handle")&&n.handle(t,i))return r=!0,t.preventDefault(),!1}),!r));i=i.parentNode);})}(wch,window,document),function(e){String.prototype.trim===e&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Object.setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e}}(),function(e){e.namespace="wch",e.classNamePrefix=e.namespace+"-",e.classSelectorPrefix="."+e.classNamePrefix,e.className=function(t){return e.classNamePrefix+t},e.classSelector=function(t){return t.replace(/\./g,e.classSelectorPrefix)},e.eventName=function(t,n){return t+(e.namespace?"."+e.namespace:"")+(n?"."+n:"")}}(wch),function(e,t){e.gestures={session:{}},e.preventDefault=function(e){e.preventDefault()},e.stopPropagation=function(e){e.stopPropagation()},e.addGesture=function(t){return e.addAction("gestures",t)};var n=Math.round,i=Math.abs,r=Math.sqrt,a=(Math.atan,Math.atan2),o=function(e,t,n){n||(n=["x","y"]);var i=t[n[0]]-e[n[0]],a=t[n[1]]-e[n[1]];return r(i*i+a*a)},s=function(e,t){if(e.length>=2&&t.length>=2){var n=["pageX","pageY"];return o(t[1],t[0],n)/o(e[1],e[0],n)}return 1},c=function(e,t,n){n||(n=["x","y"]);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*a(r,i)/Math.PI},l=function(e,t){return e===t?"":i(e)>=i(t)?e>0?"left":"right":t>0?"up":"down"},u=function(e,t){var n=["pageX","pageY"];return c(t[1],t[0],n)-c(e[1],e[0],n)},d=function(e,t,n){return{x:t/e||0,y:n/e||0}},p=function(t,n){e.gestures.stoped||e.doAction("gestures",function(i,r){e.gestures.stoped||e.options.gestureConfig[r.name]!==!1&&r.handle(t,n)})},f=function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},h=function(e,t,n){for(var i=[],r=[],a=0;a<e.length;){var o=t?e[a][t]:e[a];r.indexOf(o)<0&&i.push(e[a]),r[a]=o,a++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i},v=function(e){var t=e.length;if(1===t)return{x:n(e[0].pageX),y:n(e[0].pageY)};for(var i=0,r=0,a=0;a<t;)i+=e[a].pageX,r+=e[a].pageY,a++;return{x:n(i/t),y:n(r/t)}},g=function(){return e.options.gestureConfig.pinch},m=function(t){for(var i=[],r=0;r<t.touches.length;)i[r]={pageX:n(t.touches[r].pageX),pageY:n(t.touches[r].pageY)},r++;return{timestamp:e.now(),gesture:t.gesture,touches:i,center:v(t.touches),deltaX:t.deltaX,deltaY:t.deltaY}},E=function(t){var n=e.gestures.session,i=t.center,r=n.offsetDelta||{},a=n.prevDelta||{},o=n.prevTouch||{};t.gesture.type!==e.EVENT_START&&t.gesture.type!==e.EVENT_END||(a=n.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=n.offsetDelta={x:i.x,y:i.y}),t.deltaX=a.x+(i.x-r.x),t.deltaY=a.y+(i.y-r.y)},y=function(t){var n=e.gestures.session,i=t.touches,r=i.length;n.firstTouch||(n.firstTouch=m(t)),g()&&r>1&&!n.firstMultiTouch?n.firstMultiTouch=m(t):1===r&&(n.firstMultiTouch=!1);var a=n.firstTouch,d=n.firstMultiTouch,p=d?d.center:a.center,f=t.center=v(i);t.timestamp=e.now(),t.deltaTime=t.timestamp-a.timestamp,t.angle=c(p,f),t.distance=o(p,f),E(t),t.offsetDirection=l(t.deltaX,t.deltaY),t.scale=d?s(d.touches,i):1,t.rotation=d?u(d.touches,i):0,w(t)},b=25,w=function(t){var n,r,a,o,s=e.gestures.session,c=s.lastInterval||t,u=t.timestamp-c.timestamp;if(t.gesture.type!=e.EVENT_CANCEL&&(u>b||void 0===c.velocity)){var p=c.deltaX-t.deltaX,f=c.deltaY-t.deltaY,h=d(u,p,f);r=h.x,a=h.y,n=i(h.x)>i(h.y)?h.x:h.y,o=l(p,f)||c.direction,s.lastInterval=t}else n=c.velocity,r=c.velocityX,a=c.velocityY,o=c.direction;t.velocity=n,t.velocityX=r,t.velocityY=a,t.direction=o},T={},x=function(e){for(var t=0;t<e.length;t++)!e.identifier&&(e.identifier=0);return e},_=function(t,n){var i=x(e.slice.call(t.touches||[t])),r=t.type,a=[],o=[];if(r!==e.EVENT_START&&r!==e.EVENT_MOVE||1!==i.length){var s=0,a=[],o=[],c=x(e.slice.call(t.changedTouches||[t]));n.target=t.target;var l=e.gestures.session.target||t.target;if(a=i.filter(function(e){return f(e.target,l)}),r===e.EVENT_START)for(s=0;s<a.length;)T[a[s].identifier]=!0,s++;for(s=0;s<c.length;)T[c[s].identifier]&&o.push(c[s]),r!==e.EVENT_END&&r!==e.EVENT_CANCEL||delete T[c[s].identifier],s++;if(!o.length)return!1}else T[i[0].identifier]=!0,a=i,o=i,n.target=t.target;a=h(a.concat(o),"identifier",!0);var u=a.length,d=o.length;return r===e.EVENT_START&&u-d===0&&(n.isFirst=!0,e.gestures.touch=e.gestures.session={target:t.target}),n.isFinal=(r===e.EVENT_END||r===e.EVENT_CANCEL)&&u-d===0,n.touches=a,n.changedTouches=o,!0},A=function(t){var n={gesture:t},i=_(t,n);i&&(y(n),p(t,n),e.gestures.session.prevTouch=n,t.type!==e.EVENT_END||e.isTouchable||(e.gestures.touch=e.gestures.session={}))};t.addEventListener(e.EVENT_START,A),t.addEventListener(e.EVENT_MOVE,A),t.addEventListener(e.EVENT_END,A),t.addEventListener(e.EVENT_CANCEL,A),t.addEventListener(e.EVENT_CLICK,function(t){(e.os.android||e.os.ios)&&(e.targets.popover&&t.target===e.targets.popover||e.targets.tab||e.targets.offcanvas||e.targets.modal)&&t.preventDefault()},!0),e.isScrolling=!1;var k=null;t.addEventListener("scroll",function(){e.isScrolling=!0,k&&clearTimeout(k),k=setTimeout(function(){e.isScrolling=!1},250)})}(wch,window),function(e,t){var n,i,r=function(r,a){var o=e.gestures.session,s=this.options;switch(r.type){case e.EVENT_END:if(!a.isFinal)return;var c=o.target;if(!c||c.disabled||c.classList&&c.classList.contains("wch-disabled"))return;if(a.distance<s.tapMaxDistance&&a.deltaTime<s.tapMaxTime){if(e.options.gestureConfig.doubletap&&n&&n===c&&i&&a.timestamp-i<s.tapMaxInterval)return e.trigger(c,"doubletap",a),i=e.now(),void(n=c);e.trigger(c,t,a),i=e.now(),n=c}}};e.addGesture({name:t,index:30,handle:r,options:{fingers:1,tapMaxInterval:300,tapMaxDistance:5,tapMaxTime:250}})}(wch,"tap"),function(e){function t(e,t){var n="wch_SCROLL_POSITION_"+document.location.href+"_"+t.src,i=parseFloat(localStorage.getItem(n))||0;i&&!function(e){t.onload=function(){window.scrollTo(0,e)}}(i),setInterval(function(){var e=window.scrollY;i!==e&&(localStorage.setItem(n,e+""),i=e)},100)}e.global=e.options={gestureConfig:{tap:!0,doubletap:!1,longtap:!1,hold:!1,flick:!0,swipe:!0,drag:!0,pinch:!1}},e.initGlobal=function(t){return e.options=e.extend(!0,e.global,t),this};var n={},i=!1;e.init=function(t){return i=!0,e.options=e.extend(!0,e.global,t||{}),e.ready(function(){e.doAction("inits",function(t,i){var r=!(n[i.name]&&!i.repeat);r&&(i.handle.call(e),n[i.name]=!0)})}),this},e.addInit=function(t){return e.addAction("inits",t)},e.addInit({name:"iframe",index:100,handle:function(){var t=e.options,n=t.subpages||[];!e.os.plus&&n.length&&r(n[0])}});var r=function(n){var i=document.createElement("div");i.className="wch-iframe-wrapper";var r=n.styles||{};"string"!=typeof r.top&&(r.top="0px"),"string"!=typeof r.bottom&&(r.bottom="0px"),i.style.top=r.top,i.style.bottom=r.bottom;var a=document.createElement("iframe");a.src=n.url,a.id=n.id||n.url,a.name=a.id,i.appendChild(a),document.body.appendChild(i),e.os.wechat&&t(i,a)};e(function(){var t=document.body.classList,n=[];e.os.ios?(n.push({os:"ios",version:e.os.version}),t.add("wch-ios")):e.os.android&&(n.push({os:"android",version:e.os.version}),t.add("wch-android")),e.os.wechat&&(n.push({os:"wechat",version:e.os.wechat.version}),t.add("wch-wechat")),n.length&&e.each(n,function(n,i){var r="";i.version&&e.each(i.version.split("."),function(n,a){r=r+(r?"-":"")+a,t.add(e.className(i.os+"-"+r))})})})}(wch),function(e){var t=!1,n=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,i=function(){};i.extend=function(e){function i(){!t&&this.init&&this.init.apply(this,arguments)}var r=this.prototype;t=!0;var a=new this;t=!1;for(var o in e)a[o]="function"==typeof e[o]&&"function"==typeof r[o]&&n.test(e[o])?function(e,t){return function(){var n=this._super;this._super=r[e];var i=t.apply(this,arguments);return this._super=n,i}}(o,e[o]):e[o];return i.prototype=a,i.prototype.constructor=i,i.extend=arguments.callee,i},e.Class=i}(wch),function(e,t,n,i){var r="wch-popover",a="wch-popover-arrow",o="wch-popover-action",s="wch-backdrop",c="wch-bar-popover",l="wch-bar-backdrop",u="wch-backdrop-action",d="wch-active",p="wch-bottom",f=function(t,i){if("A"===i.tagName&&i.hash){if(e.targets._popover=n.getElementById(i.hash.replace("#","")),e.targets._popover&&e.targets._popover.classList.contains(r))return i;e.targets._popover=null}return!1};e.registerTarget({name:i,index:60,handle:f,target:!1,isReset:!1,isContinue:!0});var h,v=function(e){},g=function(t){this.removeEventListener("webkitTransitionEnd",g),this.addEventListener(e.EVENT_MOVE,e.preventDefault),e.trigger(this,"shown",this)},m=function(t){w(this,"none"),this.removeEventListener("webkitTransitionEnd",m),this.removeEventListener(e.EVENT_MOVE,e.preventDefault),v(!1),e.trigger(this,"hidden",this)},E=function(){var t=n.createElement("div");return t.classList.add(s),t.addEventListener(e.EVENT_MOVE,e.preventDefault),t.addEventListener("tap",function(t){var i=e.targets._popover;i&&(i.addEventListener("webkitTransitionEnd",m),i.classList.remove(d),y(i),n.body.setAttribute("style",""))}),t}(),y=function(t){E.setAttribute("style","opacity:0"),e.targets.popover=e.targets._popover=null,h=e.later(function(){!t.classList.contains(d)&&E.parentNode&&E.parentNode===n.body&&n.body.removeChild(E)},350)};t.addEventListener("tap",function(t){if(e.targets.popover){for(var i=!1,r=t.target;r&&r!==n;r=r.parentNode)r===e.targets.popover&&(i=!0);i&&(t.detail.gesture.preventDefault(),b(e.targets._popover,e.targets.popover))}});var b=function(e,t,i){if(!("show"===i&&e.classList.contains(d)||"hide"===i&&!e.classList.contains(d))){h&&h.cancel(),e.removeEventListener("webkitTransitionEnd",g),e.removeEventListener("webkitTransitionEnd",m),E.classList.remove(l),E.classList.remove(u);var r=n.querySelector(".wch-popover.wch-active");if(r&&(r.addEventListener("webkitTransitionEnd",m),r.classList.remove(d),e===r))return void y(r);var a=!1;(e.classList.contains(c)||e.classList.contains(o))&&(e.classList.contains(o)?(a=!0,E.classList.add(u)):E.classList.add(l)),w(e,"block"),e.offsetHeight,e.classList.add(d),E.setAttribute("style",""),n.body.appendChild(E),v(!0),T(e,t,a),E.classList.add(d),e.addEventListener("webkitTransitionEnd",g)}},w=function(e,t,n,i){var r=e.style;"undefined"!=typeof t&&(r.display=t),"undefined"!=typeof n&&(r.top=n+"px"),"undefined"!=typeof i&&(r.left=i+"px")},T=function(i,r,s){if(i&&r){if(s)return void w(i,"block");var c=t.innerWidth,l=t.innerHeight,u=i.offsetWidth,d=i.offsetHeight,f=r.offsetWidth,h=r.offsetHeight,v=e.offset(r),g=i.querySelector("."+a);g||(g=n.createElement("div"),g.className=a,i.appendChild(g));var m=g&&g.offsetWidth/2||0,E=0,y=0,b=0,T=0,x=i.classList.contains(o)?0:5,_="top";d+m<v.top-t.pageYOffset?E=v.top-d-m:d+m<l-(v.top-t.pageYOffset)-h?(_="bottom",E=v.top+h+m):(_="middle",E=Math.max((l-d)/2+t.pageYOffset,0),y=Math.max((c-u)/2+t.pageXOffset,0)),"top"===_||"bottom"===_?(y=f/2+v.left-u/2,b=y,y<x&&(y=x),y+u>c&&(y=c-u-x),g&&("top"===_?g.classList.add(p):g.classList.remove(p),b-=y,T=u/2-m/2+b,T=Math.max(Math.min(T,u-2*m-6),6),g.setAttribute("style","left:"+T+"px"))):"middle"===_&&g.setAttribute("style","display:none"),w(i,"block",E,y)}};e.createMask=function(t){var i=n.createElement("div");i.classList.add(s),i.addEventListener(e.EVENT_MOVE,e.preventDefault),i.addEventListener("tap",function(){r.close()});var r=[i];return r._show=!1,r.show=function(){return r._show=!0,i.setAttribute("style","opacity:1"),n.body.appendChild(i),r},r._remove=function(){return r._show&&(r._show=!1,i.setAttribute("style","opacity:0"),e.later(function(){var e=n.body;i.parentNode===e&&e.removeChild(i)},350)),r},r.close=function(){t?t()!==!1&&r._remove():r._remove()},r},e.fn.popover=function(){var t=arguments;this.each(function(){e.targets._popover=this,"show"!==t[0]&&"hide"!==t[0]&&"toggle"!==t[0]||b(this,t[1],t[0])})}}(wch,window,document,"popover"),function(e,t,n,i){var r=30,a=90,o=40,s=10,c=e.rad2deg=function(e){return e/(Math.PI/180)},l=(e.deg2rad=function(e){return e*(Math.PI/180)},navigator.platform.toLowerCase()),u=navigator.userAgent.toLowerCase(),d=(u.indexOf("iphone")>-1||u.indexOf("ipad")>-1||u.indexOf("ipod")>-1)&&(l.indexOf("iphone")>-1||l.indexOf("ipad")>-1||l.indexOf("ipod")>-1),p=e.Picker=function(e,t){var n=this;n.holder=e,n.options=t||{},n.init(),n.initInertiaParams(),n.calcElementItemPostion(!0),n.bindEvent()};p.prototype.findElementItems=function(){var e=this;return e.elementItems=[].slice.call(e.holder.querySelectorAll("li")),e.elementItems},p.prototype.init=function(){var e=this;e.list=e.holder.querySelector("ul"),e.findElementItems(),e.height=e.holder.offsetHeight,e.r=e.height/2-s,e.d=2*e.r,e.itemHeight=e.elementItems.length>0?e.elementItems[0].offsetHeight:o,e.itemAngle=parseInt(e.calcAngle(.8*e.itemHeight)),e.hightlightRange=e.itemAngle/2,e.visibleRange=a,e.beginAngle=0,e.beginExceed=e.beginAngle-r,e.list.angle=e.beginAngle,d&&(e.list.style.webkitTransformOrigin="center center "+e.r+"px")},p.prototype.calcElementItemPostion=function(e){var t=this;e&&(t.items=[]),t.elementItems.forEach(function(n){var i=t.elementItems.indexOf(n);if(t.endAngle=t.itemAngle*i,n.angle=t.endAngle,n.style.webkitTransformOrigin="center center -"+t.r+"px",n.style.webkitTransform="translateZ("+t.r+"px) rotateX("+-t.endAngle+"deg)",e){var r={};r.text=n.innerHTML||"",r.value=n.getAttribute("data-value")||r.text,t.items.push(r)}}),t.endExceed=t.endAngle+r,t.calcElementItemVisibility(t.beginAngle)},p.prototype.calcAngle=function(e){var t=this,n=b=parseFloat(t.r);e=Math.abs(e);var i=180*parseInt(e/t.d);e%=t.d;var r=(n*n+b*b-e*e)/(2*n*b),a=i+c(Math.acos(r));return a},p.prototype.calcElementItemVisibility=function(e){var t=this;t.elementItems.forEach(function(n){var i=Math.abs(n.angle-e);i<t.hightlightRange?n.classList.add("highlight"):i<t.visibleRange?(n.classList.add("visible"),n.classList.remove("highlight")):(n.classList.remove("highlight"),n.classList.remove("visible"))})},p.prototype.setAngle=function(e){var t=this;t.list.angle=e,t.list.style.webkitTransform="perspective(1000px) rotateY(0deg) rotateX("+e+"deg)",t.calcElementItemVisibility(e)},p.prototype.bindEvent=function(){var t=this,n=0,i=null,r=!1;t.holder.addEventListener(e.EVENT_START,function(e){r=!0,e.preventDefault(),t.list.style.webkitTransition="",i=(e.changedTouches?e.changedTouches[0]:e).pageY,n=t.list.angle,t.updateInertiaParams(e,!0)},!1),t.holder.addEventListener(e.EVENT_END,function(e){r=!1,e.preventDefault(),t.startInertiaScroll(e)},!1),t.holder.addEventListener(e.EVENT_CANCEL,function(e){r=!1,e.preventDefault(),t.startInertiaScroll(e)},!1),t.holder.addEventListener(e.EVENT_MOVE,function(e){if(r){e.preventDefault();var a=(e.changedTouches?e.changedTouches[0]:e).pageY,o=a-i,s=t.calcAngle(o),c=o>0?n-s:n+s;c>t.endExceed&&(c=t.endExceed),c<t.beginExceed&&(c=t.beginExceed),t.setAngle(c),t.updateInertiaParams(e)}},!1),t.list.addEventListener("tap",function(e){elementItem=e.target,"LI"==elementItem.tagName&&t.setSelectedIndex(t.elementItems.indexOf(elementItem),200)},!1)},p.prototype.initInertiaParams=function(){var e=this;e.lastMoveTime=0,e.lastMoveStart=0,e.stopInertiaMove=!1},p.prototype.updateInertiaParams=function(e,t){var n=this,i=e.changedTouches?e.changedTouches[0]:e;if(t)n.lastMoveStart=i.pageY,n.lastMoveTime=e.timeStamp||Date.now(),n.startAngle=n.list.angle;else{var r=e.timeStamp||Date.now();r-n.lastMoveTime>300&&(n.lastMoveTime=r,n.lastMoveStart=i.pageY)}n.stopInertiaMove=!0},p.prototype.startInertiaScroll=function(e){var t=this,n=e.changedTouches?e.changedTouches[0]:e,i=e.timeStamp||Date.now(),r=(n.pageY-t.lastMoveStart)/(i-t.lastMoveTime),a=r>0?-1:1,o=6e-4*a*-1,s=Math.abs(r/o),c=r*s/2,l=t.list.angle,u=t.calcAngle(c)*a,d=u;return l+u<t.beginExceed&&(u=t.beginExceed-l,s=s*(u/d)*.6),l+u>t.endExceed&&(u=t.endExceed-l,s=s*(u/d)*.6),0==u?void t.endScroll():void t.scrollDistAngle(i,l,u,s)},p.prototype.scrollDistAngle=function(e,t,n,i){var r=this;r.stopInertiaMove=!1,function(e,t,n,i){var a=13,o=i/a,s=0;!function c(){if(!r.stopInertiaMove){var e=r.quartEaseOut(s,t,n,o);return r.setAngle(e),s++,s>o-1||e<r.beginExceed||e>r.endExceed?void r.endScroll():void setTimeout(c,a)}}()}(e,t,n,i)},p.prototype.quartEaseOut=function(e,t,n,i){return-n*((e=e/i-1)*e*e*e-1)+t},p.prototype.endScroll=function(){var e=this;if(e.list.angle<e.beginAngle)e.list.style.webkitTransition="150ms ease-out",e.setAngle(e.beginAngle);else if(e.list.angle>e.endAngle)e.list.style.webkitTransition="150ms ease-out",e.setAngle(e.endAngle);else{var t=parseInt((e.list.angle/e.itemAngle).toFixed(0));e.list.style.webkitTransition="100ms ease-out",e.setAngle(e.itemAngle*t)}e.triggerChange()},p.prototype.triggerChange=function(t){var n=this;setTimeout(function(){var i=n.getSelectedIndex(),r=n.items[i];!e.trigger||i==n.lastIndex&&t!==!0||e.trigger(n.holder,"change",{index:i,item:r}),n.lastIndex=i,"function"==typeof t&&t()},0)},p.prototype.correctAngle=function(e){var t=this;return e<t.beginAngle?t.beginAngle:e>t.endAngle?t.endAngle:e},p.prototype.setItems=function(e,t){var n=this;n.items=t||[];var r=[];if(n.items.forEach(function(e){null!==e&&e!==i&&r.push("<li>"+(e.text||e)+"</li>")}),n.list.innerHTML=r.join(""),n.findElementItems(),n.calcElementItemPostion(),e&&e!==i){for(var a in t)if(e.indexOf(t[a].text)>-1){var o=n.itemAngle*a;n.setAngle(n.correctAngle(o))}}else e===i?n.setAngle(n.correctAngle(n.list.angle)):n.setAngle(n.correctAngle(0));n.triggerChange(!0)},p.prototype.getItems=function(){var e=this;return e.items},p.prototype.getSelectedIndex=function(){var e=this;return parseInt((e.list.angle/e.itemAngle).toFixed(0))},p.prototype.setSelectedIndex=function(e,t,n){var i=this;i.list.style.webkitTransition="";var r=i.correctAngle(i.itemAngle*e);if(t&&t>0){var a=r-i.list.angle;i.scrollDistAngle(Date.now(),i.list.angle,a,t)}else i.setAngle(r);i.triggerChange(n)},p.prototype.getSelectedItem=function(){var e=this;return e.items[e.getSelectedIndex()]},p.prototype.getSelectedValue=function(){var e=this;return(e.items[e.getSelectedIndex()]||{}).value},p.prototype.getSelectedText=function(){var e=this;return(e.items[e.getSelectedIndex()]||{}).text},p.prototype.setSelectedValue=function(e,t,n){var i=this;if(""==e)for(var r in i.items){var a=i.items[r];if(e.indexOf(a.text)>-1)return void i.setSelectedIndex(r,t,n)}else i.setItems(e,i.items)},e.fn&&(e.fn.picker=function(e){return this.each(function(t,n){if(!n.picker)if(e)n.picker=new p(n,e);else{var i=n.getAttribute("data-picker-options"),r=i?JSON.parse(i):{};n.picker=new p(n,r)}}),this[0]?this[0].picker:null},e.ready(function(){e(".wch-picker").picker()}))}(window.wch||window,window,document,void 0),function(e,t){e.dom=function(n){return"string"!=typeof n?n instanceof Array||n[0]&&n.length?[].slice.call(n):[n]:(e.__create_dom_div__||(e.__create_dom_div__=t.createElement("div")),e.__create_dom_div__.innerHTML=n,[].slice.call(e.__create_dom_div__.childNodes))};var n='<div class="wch-poppicker">        <div class="wch-poppicker-header">            <a class="wch-btn wch-poppicker-btn-cancel">取消</a>            <a class="wch-btn wch-btn-blue wch-poppicker-btn-ok">确定</a>            <div class="wch-poppicker-clear"></div>        </div>        <div class="wch-poppicker-body">        </div>    </div>',i='<div class="wch-picker">        <div class="wch-picker-inner">            <div class="wch-pciker-rule wch-pciker-rule-ft"></div>            <ul class="wch-pciker-list">            </ul>            <div class="wch-pciker-rule wch-pciker-rule-bg"></div>        </div>    </div>';e.PopPicker=e.Class.extend({init:function(i){var r=this;r.options=i||{},r.tmpValue=i.deafultValue,r.options.buttons=r.options.buttons||["取消","确定"],r.clicked="ok",r.panel=e.dom(n)[0],t.body.appendChild(r.panel),r.ok=r.panel.querySelector(".wch-poppicker-btn-ok"),r.cancel=r.panel.querySelector(".wch-poppicker-btn-cancel"),r.body=r.panel.querySelector(".wch-poppicker-body"),r.mask=e.createMask(),r.cancel.innerText=r.options.buttons[0],r.ok.innerText=r.options.buttons[1],r.cancel.addEventListener("tap",function(e){r.tmpValue&&(r.options.deafultValue=r.tmpValue),r.clicked="cancel",r.hide()},!1),r.ok.addEventListener("tap",function(e){if(r.tmpValue=void 0,r.callback){var t=r.callback(r.getSelectedItems());t!==!1&&(r.clicked="ok",r.hide())}},!1),r.mask[0].addEventListener("tap",function(){r.tmpValue&&(r.options.deafultValue=r.tmpValue),r.clicked="cancel",r.hide()},!1),r._createPicker(),r.panel.addEventListener(e.EVENT_START,function(e){e.preventDefault()},!1),r.panel.addEventListener(e.EVENT_MOVE,function(e){e.preventDefault()},!1)},_createPicker:function(){var t=this,n=t.options.layer||1,r=100/n+"%";t.pickers=[];for(var a=1;a<=n;a++){var o=e.dom(i)[0];o.style.width=r,t.body.appendChild(o);var s=e(o).picker();t.pickers.push(s),o.addEventListener("change",function(e){var n=this.nextSibling;if(n&&n.picker){var i=e.detail||{},r=i.item||{};n.picker.setItems(t.options.deafultValue,r.children)}},!1)}},setData:function(e){var t=this;e=e||[],t.pickers[0].setItems(void 0,e)},getSelectedItems:function(){var e=this,t=[];for(var n in e.pickers){var i=e.pickers[n];t.push(i.getSelectedItem()||{})}return t},show:function(n){var i=this;i.tmpValue=i.options.deafultValue,i.options.deafultValue="",i.callback=n,i.mask.show(),t.body.classList.add(e.className("poppicker-active-for-page")),i.panel.classList.add(e.className("active")),i.__back=e.back,e.back=function(){i.hide()}},hide:function(){var n=this;n.disposed||(n.panel.classList.remove(e.className("active")),n.mask.close(),t.body.classList.remove(e.className("poppicker-active-for-page")),e.back=n.__back)},dispose:function(){var e=this;e.hide(),setTimeout(function(){e.panel.parentNode.removeChild(e.panel);for(var t in e)e[t]=null,delete e[t];e.disposed=!0},300)}})}(wch,document);